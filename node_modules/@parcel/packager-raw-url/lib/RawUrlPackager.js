"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _assert = _interopRequireDefault(require("assert"));

var _plugin = require("@parcel/plugin");

var _utils = require("@parcel/utils");

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var _default = new _plugin.Packager({
  async package({
    bundle,
    bundleGraph
  }) {
    let assets = [];
    bundle.traverseAssets(asset => {
      assets.push(asset);
    });

    _assert.default.equal(assets.length, 1, 'Raw bundles must only contain one asset');

    let {
      contents
    } = (0, _utils.replaceURLReferences)({
      bundle,
      bundleGraph,
      contents: await assets[0].getCode(),
      relative: false
    });
    return {
      contents
    };
  }

});

exports.default = _default;