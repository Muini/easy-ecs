"use strict";

var _ecs = require("../core/ecs");

var _addons = require("../core/addons");

var _game = require("./game");

const world = new _ecs.World({
  addons: [_addons.Loop, _addons.Time, _addons.Input, _addons.Renderer, _addons.SaveGame],
  systems: [_game.PlayerMovement, _game.NPCMovement, _game.CharacterRenderer]
});
const player = new _game.Player(world, {
  x: _addons.Renderer.canvas.width / 2 << 0,
  y: _addons.Renderer.canvas.height / 2 << 0,
  health: 100,
  speed: 0.2,
  size: 10
});

for (let i = 0; i < 4; i++) {
  new _game.Soldier(world, {
    color: `rgba(200, 50, 50, 1.0)`,
    x: Math.random() * _addons.Renderer.canvas.width << 0,
    y: Math.random() * _addons.Renderer.canvas.height << 0,
    health: 100,
    speed: Math.random() * 0.1,
    size: 8
  });
}

world.start();
setTimeout(_ => {
  const id = _addons.SaveGame.save();

  setTimeout(_ => {
    _addons.SaveGame.restore(id);
  }, 2000);
}, 300);